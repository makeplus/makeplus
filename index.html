<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
<title>MakePlusâ„¢</title>
<link rel="stylesheet" href="https://sindresorhus.com/github-markdown-css/github-markdown.css">
<style>
body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
}
</style>
</head>
<body>
<article class="markdown-body">
<h1 id="makeplus">MakePlus</h1>
<p><strong>MakePlus</strong> is a simple software package that adds great new capabilities to
the ubiquitous <strong>GNU Make</strong> tool. The <code>make</code> command can be found on almost all
modern computer systems. MakePlus has very minimal prerequisites and even has a
auto-install incantation.</p>
<p>By adding one <strong>include</strong> line to the start of your <code>Makefile</code>, you get:</p>
<ul>
<li><strong>Functional Prerequisite Testing</strong> (instead of just file timestamps)<ul>
<li>Use testing functions from the <strong>MakePlus Standard Library</strong></li>
<li>Use any testing program in your <strong>PATH</strong> that returns 0 or 1(-255)</li>
<li>Define <strong>inline testing functions</strong> in your Makefile</li></ul></li>
<li><strong>Special Commands</strong> to do common things</li>
<li><strong>Special Targets</strong> for MakePlus related tasks</li>
<li>MakePlus features integrate nicely with the standard make features<ul>
<li>Use Makefile variables in your prerequisite testing functions</li>
<li>Automatic variables (like <code>$&lt;</code>) can use output from testing functions</li></ul></li>
</ul>
<h2 id="examplemakefileusingmakeplus">Example Makefile using MakePlus</h2>
<p>Here's a Makefile that prints a Hello or Goodbye greeting.</p>
<pre><code class="make language-make">include $(shell make+)

50-50 = return $((RANDOM % 2))

say-something: $(+50-50?say-hello|say-goodbye)

say-hello say-goodbye:
    @printf "%s, my friend!\n" `sed 's/.*/\u&amp;/' &lt;&lt;&lt; ${@:say-%=%}`
</code></pre>
<p><a href="https://github.com/makeplus/makeplus/blob/master/ReadMe.md#makeplus-installation">Install MakePlus</a>,
save the above text into a file called <code>Makefile</code> and run <code>make say-something</code>.</p>
<p>If you don't want to install MakePlus yet, change the first line to:</p>
<pre><code>include $(shell wget -qnc https://makeplus.net/.make+;. ./.make+)
</code></pre>
<p>and the first time you run <code>make</code> it will auto-install MakePlus locally in your
current directory.</p>
<h3 id="howitworks">How it Works</h3>
<p>The first line triggers all the MakePlus magic! The rest of the Makefile is a
normal GNU Makfile, except for things that begin with a <code>+</code>.</p>
<p>Note the 'say-something' rule. It has a prerequisite that calls a test function
(<code>50-50</code> defined inline) and invokes one of two different rules depending on the
result.</p>
<h2 id="tryitnow">Try It Now</h2>
<p>MakePlus comes with a bunch of demo Makefiles that are easy to run. Try out the
<a href="https://www.mfwi.edu/MFWI/Recordings/One%20Fish.pdf">red-fish-blue-fish</a> demo
now!</p>
<p>Copy this command and paste it into a terminal:</p>
<pre><code>(
  set -e
  cd $(mktemp -d)
  wget -q https://makeplus.net/red-fish-blue-fish/Makefile
  while true; do
    clear
    (set -x; make fish)
    printf 'Press enter'
    read
  done
)
</code></pre>
<p>Every time you press enter it will run <code>make fish</code> which should display 1 or 2
red or blue fish. The Makefile is
<a href="https://github.com/makeplus/makeplus/blob/master/demo/red-fish-blue-fish/Makefile">here</a>.
See if you can figure it out. (It's not hard. :)</p>
<h2 id="moremakeplusinfo">More MakePlus Info</h2>
<ul>
<li><a href="https://github.com/makeplus/makeplus">Source Code</a></li>
<li><a href="https://github.com/makeplus/makeplus/blob/master/ReadMe.md#makeplus-installation">Installation</a></li>
<li><a href="https://github.com/makeplus/makeplus/blob/master/ReadMe.md#makeplus">Documentation</a></li>
<li><a href="https://github.com/makeplus/makeplus/tree/master/demo">Demos</a></li>
<li><a href="https://github.com/makeplus/makeplus/issues">Issues</a></li>
<li>Chat in #makeplus on irc.freenode.net</li>
</ul></article>
</body>
</html>
